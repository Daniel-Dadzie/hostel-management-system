server:
  port: 8080

spring:
  application:
    name: hostel-management-system

  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/hostel_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        format_sql: true
    open-in-view: false

  flyway:
    enabled: true
    locations: classpath:db/migration
    placeholder-replacement: true
    placeholders:
      # IMPORTANT: Set ADMIN_PASSWORD_HASH environment variable before first run!
      # Generate with: java -cp target/classes -e "new BCryptPasswordEncoder().encode(\"your-password\")"
      # Or use online: https://bcrypt-generator.com/ (rounds=10)
      # Default below is a random UUID hashed - check startup logs for the generated password
      adminPasswordHash: ${ADMIN_PASSWORD_HASH:}

logging:
  level:
    org.hibernate.SQL: INFO

app:
  frontend-url: ${FRONTEND_URL:http://localhost:5173}

  jwt:
    # IMPORTANT: Set JWT_SECRET environment variable in production!
    # Default value is for development only and should never be used in production.
    secret: ${JWT_SECRET:dev-only-secret-change-in-production-min-32-chars}
    expiration-seconds: ${JWT_EXPIRATION_SECONDS:86400}

  booking:
    payment-hold-minutes: ${BOOKING_PAYMENT_HOLD_MINUTES:30}
    expiration-cron-ms: ${BOOKING_EXPIRATION_FIXED_DELAY_MS:300000}
